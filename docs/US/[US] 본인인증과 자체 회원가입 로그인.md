# 유저 스토리: 아이디(ID) 기반 회원가입 및 로그인

| 문서 ID           | US-AUTH-001/002/003/004                            |
| :---------------- | :------------------------------------------------- |
| **문서 버전**     | 1.3 (본인인증 기반 ID, PW 찾기, 통합 로그인 추가 ) |
| **프로젝트**      | AssetMind                                          |
| **작성자**        | 양윤기                                             |
| **마지막 작성일** | 2026년 1월 6일                                     |

---

## 1. 개요

본 문서는 이메일 인증 절차를 제외하고, 고유한 아이디(ID)와 비밀번호를 사용하여 간편하게 회원가입 및 로그인을 수행하는 기능을 정의한다. 특히 중복된 아이디 입력 시 사용자가 이를 인지하고 수정할 수 있도록 구체적인 예외 처리를 포함한다.

---

## 2. 유저 스토리 상세

### 2.1. 신규 회원가입 (Sign Up)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| :------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Story ID**   | `US-AUTH-001`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **제목**       | 아이디(ID) 및 외부 본인인증 기반 신규 회원가입                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **설명**       | **Role**: AssetMind를 처음 방문한 예비 사용자로서<br>**Feature**: 고유한 아이디를 생성하고 외부 본인인증 서비스를 통해 실명을 확인받아 가입하고 싶다.<br>**Benefit**: 왜냐하면 허위 가입을 차단하고 신뢰할 수 있는 실명 계정을 생성하여 안전하게 자산을 관리하기 위해서이다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **인수 조건**  | 1. **Given** 사용자가 회원가입모달을 클릭했을 때,<br>2. **When** (아이디) 아이디 입력 후 **[중복 확인]** 버튼을 누르면, 시스템은 사용 가능 여부를 검증하여 결과(사용 가능/중복)를 표시한다.<br>3. **When** (비밀번호) 비밀번호와 비밀번호 확인 값을 입력하면, 실시간으로 일치 여부를 판별하여 불일치 시 경고 문구를 표시한다.<br>4. **When** (본인인증) **[휴대폰 본인인증]** 버튼을 클릭하면,<br>   - **Then** 외부 인증(포트원) 팝업 창이 호출되어야 한다.<br>5. **When** 외부 팝업에서 본인인증을 성공적으로 완료하면,<br>   - **Then** 팝업이 닫히고 회원가입 화면의 버튼이 **"인증이 완료되었습니다"** 상태로 변경(비활성화)된다.<br>   - **Then** 인증된 사용자 정보(이름, 휴대폰 번호)가 시스템 내부에 임시 저장된다.<br>6. **Then** 위 모든 조건(아이디 중복확인, 비밀번호 일치, 본인인증 완료)이 충족되어야만 **[가입하기]** 버튼이 활성화된다.                                                                                                                                                        |
| **UI/UX 명세** | **[주요 컴포넌트 (View Components)]**<br>- `SignUpForm`: 전체 폼 레이아웃<br>- `Input` (reuse): 아이디 입력 필드 + `Button` (reuse):[중복 확인] 버튼<br>- `Input` (reuse): 비밀번호 입력 필드 + `EyeIcon` (토글)<br>- `IdentityVerificationButton`(reuse): **[휴대폰 본인인증]** 단일 버튼 컴포넌트<br><br>**[UI 상태 정의 (UI States)]**<br>- **Initial**: [휴대폰 본인인증] 버튼 활성화.<br>- **Processing**: 버튼 클릭 시 외부 모듈(포트원) 호출 중 로딩 인디케이터 노출.<br>- **Verification/Success**: 인증 완료 시 버튼 텍스트가 "인증 완료"로 변경되며 Disabled 처리.<br>- **Verification/Fail**: 외부 인증 실패 또는 중도 취소 시 "본인인증에 실패했습니다." 토스트 메시지 출력.<br><br>**[인터랙션 & 로직 (Interaction & Logic)]**<br>- **External API**: 포트원 연동 <br>- **Data Binding**: 인증 성공 시 리턴받은 `imp_uid` 또는 고유 식별값(CI/DI)을 회원가입 요청(`submit`) 시 함께 전송해야 함.<br>- **Prevent Edit**: 본인인증 완료 후에는 인증된 정보와 다른 명의로 가입할 수 없도록 로직 제어. |
| **우선순위**   | P1 (필수)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **포인트**     | 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

---

### 2.2. 통합 로그인 (Login)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| :------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Story ID**   | `US-AUTH-002`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **제목**       | 아이디(ID) 및 소셜 계정 로그인                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **설명**       | **Role**: 계정을 생성한 사용자로서<br>**Feature**: 아이디/비밀번호 또는 소셜 계정(카카오, 구글)을 통해 서비스에 접속하고 싶다.<br>**Benefit**: 왜냐하면 상황에 따라 더 편리한 방식을 선택하여 내 자산 데이터에 빠르게 접근하기 위해서이다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **인수 조건**  | 1. **Given** 사용자가 로그인 모달을 클릭했을 때,<br>2. **When** (ID 로그인-실패) 존재하지 않는 아이디를 입력하거나 비밀번호가 틀리면,<br>3. **Then** 각각 "존재하지 않는 아이디 입니다." 또는 "비밀번호가 올바르지 않습니다." 경고 문구가 표시된다.<br>4. **When** (ID 로그인-성공) 올바른 아이디와 비밀번호를 입력하고 로그인을 시도하면,<br>5. **Then** 인증 토큰(JWT)이 발급되고 메인 페이지로 이동한다.<br>6. **When** (소셜 로그인) **[카카오로 시작하기]** 또는 **[Google로 시작하기]** 버튼을 클릭하면,<br>7. **Then** 해당 소셜 제공자의 인증 페이지로 리다이렉트 되며, 인증 성공 시 서비스 메인 페이지로 로그인되어 이동한다.                                                                                                                                                                                                                                                                                                                                                                                                        |
| **UI/UX 명세** | **[주요 컴포넌트 (View Components)]**<br>- `LoginForm`: 로그인 폼 레이아웃<br>- `Input`(reuse): 아이디/비밀번호 입력 필드<br>- `Button` (reuse): [로그인] 버튼<br>- `SocialLoginGroup`: 소셜 로그인 버튼 컨테이너<br>- `SocialButton`: 카카오, 구글 로그인 버튼<br><br>**[UI 상태 정의 (UI States)]**<br>- **Initial/Loading**: 아이디 필드에 자동 포커스. 로그인 시도 시 버튼에 로딩 스피너 표시.<br>- **Success/Active**: 로그인 성공 시 메인 페이지로 이동.<br>- **Validation/Empty**: 잘못된 아이디 입력 시 "존재하지 않는 아이디 입니다." 메시지를 빨간색으로 표시. 잘못된 비밀번호 입력 시 "비밀번호가 올바르지 않습니다." 메시지를 빨간색으로 표시.<br>- **Error**: 서버 오류 시 "로그인에 실패했습니다. 잠시 후 다시 시도해주세요." 토스트 메시지 노출.<br><br>**[인터랙션 & 로직 (Interaction & Logic)]**<br>- **Enter Key**: 비밀번호 입력창에서 엔터 키 입력 시 로그인 시도<br>- **Security**: 비밀번호 마스킹 처리(type="password") 및 보기/숨기기 토글 기능 제공<br>- **Social Flow**: 소셜 버튼 클릭 시 OAuth 인증 창 팝업 호출 |
| **우선순위**   | P1 (필수)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **포인트**     | 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

---

### 2.3. 아이디 찾기 (Find ID)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Story ID**   | `US-AUTH-003`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **제목**       | 본인인증 기반 아이디 찾기                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **설명**       | **Role**: 아이디를 잊어버린 사용자로서<br>**Feature**: 휴대폰 본인인증을 통해 가입된 아이디를 확인하고 싶다.<br>**Benefit**: 왜냐하면 계정을 다시 생성하지 않고 기존 자산 데이터를 계속 관리하기 위해서이다.                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **인수 조건**  | 1. **Given** 로그인 화면 하단의 [아이디 찾기] 링크를 통해 진입했을 때,<br>2. **When** **[휴대폰 본인인증]** 버튼을 클릭하여 외부 인증을 성공적으로 완료하면,<br>3. **Then** 시스템은 인증된 정보(CI/DI)와 일치하는 회원 정보를 조회한다.<br>4. **Then** (회원 존재 시) 화면에 사용자의 아이디 전체(예: `assetking123`)와 가입일자를 보여주고 [로그인하러 가기] 버튼을 제공한다.<br>5. **Then** (회원 미존재 시) "가입된 회원 정보가 없습니다." 문구와 함께 [회원가입] 버튼을 제공한다.                                                                                                                                                             |
| **UI/UX 명세** | **[Components]**<br>- `FindIdView`: 아이디 찾기 탭 화면<br>- `IdentityVerificationButton` (reuse): [휴대폰 본인인증] 단일 버튼<br>- `ResultCard`: 결과(아이디/미가입 안내) 표시 영역<br><br>**[States]**<br>- **Initial**: 안내 문구("본인인증을 통해 아이디를 찾을 수 있습니다")와 인증 버튼 노출.<br>- **Success**: 인증 완료 시 모달이 닫히고, 결과 영역에 아이디를 텍스트로 표시 (보안 정책에 따라 마스킹 `as*****` 처리 가능 <br>- **Empty**: 일치하는 계정이 없을 경우 "일치하는 정보가 없습니다." 에러 페이지 노출.<br><br>**[Interaction & Logic]**<br>- **One-Click**: 별도의 이름/번호 입력 없이 인증 버튼 클릭 한 번으로 프로세스 시작. |
| **우선순위**   | P2 (권장)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **포인트**     | 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

---

### 2.4. 비밀번호 재설정 (Reset Password)

| 항목           | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Story ID**   | `US-AUTH-004`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **제목**       | 본인인증 기반 비밀번호 재설정                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **설명**       | **Role**: 비밀번호를 분실한 사용자로서<br>**Feature**: 본인인증으로 소유주임을 증명하고 새로운 비밀번호로 변경하고 싶다.<br>**Benefit**: 왜냐하면 기존 비밀번호를 알 수 없는 상태에서 안전하게 계정 접근 권한을 회복해야 하기 때문이다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **인수 조건**  | 1. **Given** [비밀번호 찾기] 모달에 접속했을 때,<br>2. **When** 자신의 **아이디를 입력**하고 **[휴대폰 본인인증]** 버튼을 클릭하여 인증을 완료하면,<br>3. **Then** 시스템은 입력한 '아이디'와 '본인인증 정보'가 일치하는지 검증한다.<br>4. **Then** (일치 시) 기존 비밀번호를 묻지 않고, **[새 비밀번호 변경]** 화면으로 즉시 전환된다.<br>5. **Then** (불일치 시) "아이디와 본인인증 정보가 일치하지 않습니다." 빨간색으로 메시지를 표시한다.<br>6. **When** 새 비밀번호를 입력하고 [변경완료]를 누르면 비밀번호가 업데이트되고 로그인 페이지로 이동한다.                                                                                                                                                             |
| **UI/UX 명세** | **[Components]**<br>- `FindPwStep1`: 아이디 입력 필드 + [휴대폰 본인인증] 버튼<br>- `ResetPwStep2`: 새 비밀번호 + 새 비밀번호 확인 입력 폼 (인증 성공 시에만 노출)<br><br>**[States]**<br>- **Step 1 (Auth)**: 아이디 미입력 시 인증 버튼 비활성화. 인증 실패 시 토스트 메시지.<br>- **Step 2 (Reset)**: 비밀번호 유효성 규칙(8자 이상, 특수문자 등) 실시간 검사. 변경 성공 시 "비밀번호가 변경되었습니다" 토스트 알림.<br><br>**[Interaction & Logic]**<br>- **Security Check**: 단순히 본인인증만 하는 것이 아니라, **입력한 ID의 소유주와 인증된 사람이 같은지(CI 비교)** 반드시 서버에서 검증해야 함.<br>- **Session**: 비밀번호 변경 페이지는 일회성 접근 권한만 부여되며, 새로고침 시 처음부터 다시 인증해야 함. |
| **우선순위**   | P1 (필수)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **포인트**     | 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
